[{"E:\\work\\workspace\\20201228_ReactAdmin\\src\\index.js":"1","E:\\work\\workspace\\20201228_ReactAdmin\\src\\App.js":"2","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Head\\index.js":"3","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\index.js":"4","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Side\\index.js":"5","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Head\\Head.js":"6","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Side\\Side.js":"7","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\DictionaryPage.js":"8","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\DictionaryTable\\index.js":"9","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\Dialog\\index.js":"10","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\DictionaryTable\\DictionaryTable.js":"11","E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\Dialog\\Dialog.js":"12"},{"size":374,"mtime":1611555400881,"results":"13","hashOfConfig":"14"},{"size":720,"mtime":1611643722682,"results":"15","hashOfConfig":"14"},{"size":50,"mtime":1609896877183,"results":"16","hashOfConfig":"14"},{"size":82,"mtime":1611027526749,"results":"17","hashOfConfig":"14"},{"size":50,"mtime":1609897242672,"results":"18","hashOfConfig":"14"},{"size":740,"mtime":1611021212822,"results":"19","hashOfConfig":"14"},{"size":2219,"mtime":1610936061522,"results":"20","hashOfConfig":"14"},{"size":4589,"mtime":1611650166979,"results":"21","hashOfConfig":"14"},{"size":85,"mtime":1611027526746,"results":"22","hashOfConfig":"14"},{"size":58,"mtime":1611027526743,"results":"23","hashOfConfig":"14"},{"size":3869,"mtime":1611643654654,"results":"24","hashOfConfig":"14"},{"size":3759,"mtime":1611642635348,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1ohlehs",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"28"},"E:\\work\\workspace\\20201228_ReactAdmin\\src\\index.js",[],["52","53"],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\App.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Head\\index.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\index.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Side\\index.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Head\\Head.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\Side\\Side.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\DictionaryPage.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\DictionaryTable\\index.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\Dialog\\index.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\DictionaryTable\\DictionaryTable.js",[],"E:\\work\\workspace\\20201228_ReactAdmin\\src\\pages\\DictionaryPage\\components\\Dialog\\Dialog.js",["54","55"],"import { Modal, Button, Input, message } from 'antd';\r\nimport React, { useEffect } from 'react';\r\nimport data from '../../data.json';\r\nimport axios from 'axios';\r\n\r\nconst Dialog = (props) => {\r\n  const [visible, setVisible] = React.useState(false);\r\n  const [confirmLoading, setConfirmLoading] = React.useState(false);\r\n  const [parentsEle, setParentsEle] = React.useState( [] );\r\n  const [addData, setAddData] = React.useState({\r\n    \"desc_\": '',\r\n    \"dictKey\": '',\r\n    \"dictName\": '',\r\n    \"dictPointType\": '',\r\n    \"dictType\": '',\r\n    \"level\": '',\r\n    \"orgCode\": ''\r\n  });\r\n  const [ trackArr, setTrackArr ] = React.useState( [] );\r\n  const [ keyc, setKeyc ] = React.useState( \"\" );\r\n\r\n  const showModal = () => {\r\n    var parentsDom = [];\r\n    let newTrackArr = [];\r\n    let newAddData = JSON.parse(JSON.stringify(addData));\r\n    if(window.track.length !== 0){\r\n      window.track.map((item,key)=>{\r\n        const lvCount = item.level === 0? \"一\" : item.level === 1? \"二\" :item.level === 2? \"三\" :item.level === 3? \"四\" : item.level === 4? \"五\" : parseInt(item.level)+1;\r\n        parentsDom.push(<p key={key}>{lvCount}级名称:{item.name}</p>)\r\n        newTrackArr.push(item.index);\r\n      })\r\n    }\r\n    setParentsEle(parentsDom)\r\n    setTrackArr(newTrackArr)\r\n    newAddData.level = window.track.length;\r\n    newAddData.key = new Date().getTime();\r\n    setAddData(newAddData);\r\n    setVisible(true);\r\n  };\r\n\r\n  useEffect(() =>{\r\n    const kc = new Date().getTime();\r\n    setKeyc(kc)\r\n  },[visible])\r\n\r\n  const handleOk = () => {\r\n    console.log(addData)\r\n    console.log(typeof addData)\r\n\r\n    axios.post('http://192.168.43.254:8099/dict/addDict', {\r\n      ...addData\r\n    }).then((res) => {\r\n      console.log('res', res)\r\n      if(res.status === 0) {\r\n        message.info('新增成功');\r\n      }\r\n    }).catch(function (error) {\r\n      console.log(error);\r\n    });\r\n\r\n    let parentData = data;\r\n    if(trackArr.length === 0){\r\n      data.push(addData)\r\n    }else{\r\n      trackArr.forEach((item,index)=>{\r\n        if(index === 0){\r\n          parentData = parentData[item];\r\n        }else if(index < trackArr.length){\r\n          parentData = parentData.values[item]\r\n        }\r\n      })\r\n      if(!parentData.values) parentData.values = [];\r\n      parentData.values.push(addData);\r\n    }\r\n    props.addHandle(data,trackArr);\r\n    setVisible(false);\r\n    setConfirmLoading(false);\r\n\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    console.log('Clicked cancel button');\r\n    setVisible(false);\r\n  };\r\n\r\n  const setValue = ( e, item ) =>{\r\n    addData[item] = e.target.value;\r\n    setAddData(addData);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button type=\"primary\" onClick={showModal}>\r\n        新增\r\n      </Button>\r\n      <Modal\r\n        key = {keyc}\r\n        title=\"新增\"\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        confirmLoading={confirmLoading}\r\n        cancelText = \"取消\"\r\n        okText = \"确定\"\r\n        onCancel={handleCancel}\r\n      >\r\n        <div>\r\n          { parentsEle.length > 0 ? \r\n            <div style={{borderBottom: '1px solid #d9d9d9', marginBottom: 20, padding: 5}}>\r\n              {parentsEle}\r\n            </div>: \"\" }\r\n          {\r\n            Object.keys(addData).map(( item, index )=>{\r\n              if(item !== 'values'){\r\n                return (\r\n                  <p key={index} style={{display: \"flex\",flexDirection: \"row\", flexWrap: \"nowrap\", justifyContent: \"flex-start\"}}>\r\n                    <span style={{width:100}}>{ item }：</span>\r\n                    <Input onChange={e=>{setValue(e,item)}}/>\r\n                  </p>\r\n                )\r\n              }\r\n            })\r\n          }\r\n          \r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialog;",{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":27,"column":34,"nodeType":"62","messageId":"63","endLine":27,"endColumn":36},{"ruleId":"60","severity":1,"message":"64","line":112,"column":53,"nodeType":"62","messageId":"65","endLine":112,"endColumn":55},"no-native-reassign",["66"],"no-negated-in-lhs",["67"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","Array.prototype.map() expects a value to be returned at the end of arrow function.","expectedAtEnd","no-global-assign","no-unsafe-negation"]